@model SocialWelfarre.Models.ApplicationFoodPack

@{
    ViewData["Title"] = "Create";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create - Food Pack Application</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            background-color: #e6f0ff;
        }

        .card {
            border-left: 6px solid #0d6efd;
        }

        h1, h4 {
            color: #0d6efd;
        }

        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }

        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .modal-header {
            background-color: #0d6efd;
            color: white;
        }

        .form-check-label a {
            color: #0d6efd;
            text-decoration: underline;
        }

            .form-check-label a:hover {
                color: #084298;
            }

        .sm-input {
            width: 100%;
        }
    </style>
</head>
<body>

    <div class="container mt-5">
        <h1 class="mb-4 text-center">Food Pack Application</h1>
       

        <div class="card shadow-sm p-3">
            <div class="card-body">
                <h4 class="card-title mb-4">Applicant Information</h4>
                <!-- Success Alert -->
                <div id="successAlert" class="alert alert-success d-none" role="alert">
                    Success!
                </div>
                <form asp-action="FoodPackPending" id="FoodPackPending" enctype="multipart/form-data" onsubmit="return handleSubmit(event)">
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                    <!-- Row 1: First Name, Middle Name -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FirstName" class="form-label">First Name *</label>
                            <input asp-for="FirstName" class="form-control sm-input" required />
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="MiddleName" class="form-label">Middle Name *</label>
                            <input asp-for="MiddleName" class="form-control sm-input" required />
                            <span asp-validation-for="MiddleName" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Row 2: Last Name, Packs -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="LastName" class="form-label">Last Name *</label>
                            <input asp-for="LastName" class="form-control sm-input" required />
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Packs" class="form-label">Number of Packs *</label>
                            <input asp-for="Packs" type="number" class="form-control sm-input" required />
                            <span asp-validation-for="Packs" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Row 3: Age, Barangay -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="Age" class="form-label">Age *</label>
                            <input asp-for="Age" type="number" class="form-control sm-input" required />
                            <span asp-validation-for="Age" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Barangay" class="form-label">Barangay *</label>
                            <select asp-for="Barangay" class="form-select sm-input" asp-items="Html.GetEnumSelectList<SocialWelfarre.Models.Barangay>()" required>
                                <option value="">Select Barangay</option>
                            </select>
                            <span asp-validation-for="Barangay" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Row 4: Address, Contact Number -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="Address" class="form-label">Address *</label>
                            <input asp-for="Address" class="form-control sm-input" required />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="ContactNumber" class="form-label">Contact Number *</label>
                            <input asp-for="ContactNumber" type="tel" class="form-control sm-input" required />
                            <span asp-validation-for="ContactNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Row 5: Barangay Certificate, Valid ID -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="brgyCertFile">Upload Barangay Certificate *</label>
                            <input type="file" name="brgyCertFile" class="form-control sm-input" required />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="validIdFile">Upload Valid ID *</label>
                            <input type="file" name="validIdFile" class="form-control sm-input" required />
                        </div>
                    </div>

                    <!-- Row 6: Reason -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="Reason" class="form-label">Reason *</label>
                            <select asp-for="Reason" class="form-select sm-input" asp-items="Html.GetEnumSelectList<SocialWelfarre.Models.Reason>()" required>
                                <option value="">Select Reason</option>
                            </select>
                            <span asp-validation-for="Reason" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Terms Agreement -->
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="termsCheck" required />
                        <label class="form-check-label" for="termsCheck">
                            I agree to the
                            <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a> and
                            <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a>.
                        </label>
                    </div>

                    <!-- Submit -->
                    <div class="d-grid">
                        <input type="submit" value="Submit Application" class="btn btn-primary" />
                    </div>
                </form>

                <div class="mt-4">
                    <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Back to Home</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This policy complies with the Data Privacy Act of 2012 (RA 10173) of the Republic of the Philippines.</p>
                    <p>We collect and use your personal data solely to evaluate your eligibility for food pack assistance. Your data is securely stored and will only be shared with authorized personnel or government entities if legally required.</p>
                    <p>You may contact the City Social Welfare and Development Office for inquiries, corrections, or requests to delete your data.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>1. The information you provide must be true and accurate.</p>
                    <p>2. Submission of this form does not guarantee assistance; all applications are subject to verification and approval.</p>
                    <p>3. You agree to be contacted by CSWDO for any verification process related to this application.</p>
                    <p>4. Any misrepresentation may result in denial or revocation of aid.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SweetAlert2 Success -->
    <script>
         function handleSubmit(event) {
            // Check if the form is valid
            if (document.getElementById("FoodPackPending").checkValidity()) {
                // Show success alert
                document.getElementById("successAlert").classList.remove("d-none");

                // Optionally, you can hide the alert after a few seconds
                setTimeout(function() {
                    document.getElementById("successAlert").classList.add("d-none");
                }, 3000);

                return true; // Allow form submission
            } else {
                event.preventDefault(); // Prevent form submission if not valid
                return false;
            }
        }
    </script>

</body>
</html>
